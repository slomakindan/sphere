<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UNIT CORE DESKTOP v3.1</title>
  <link rel="stylesheet" href="./src/style.css" />
</head>

<body>
  <!-- Drag handle for Electron window movement -->
  <header id="window-drag-bar"></header>

  <div id="desktop-wrapper">
    <aside id="ui-panel">
      <div class="panel-header">
        <h1>UNIT CORE v3.2</h1>
        <div id="status">–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞</div>
      </div>

      <div class="controls-group">
        <label>–ê—É–¥–∏–æ</label>
        <div class="button-row">
          <button id="loadAudioBtn">üìÅ –§–∞–π–ª</button>
          <button id="systemAudioBtn">üîä –°–∏—Å—Ç–µ–º–∞</button>
        </div>
        <button id="playPauseBtn" disabled>‚ñ∂ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
      </div>

      <div class="controls-group">
        <label>–ó–∞—Ö–≤–∞—Ç –¥–≤–∏–∂–µ–Ω–∏—è</label>
        <div class="button-row">
          <button id="recordMotionBtn">üî¥ –ó–∞–ø–∏—Å—å</button>
          <button id="loadMotionBtn">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </div>
        <div id="captureInfo" class="status-text">–ë—É—Ñ–µ—Ä: 0 –∫–∞–¥—Ä–æ–≤</div>
      </div>

      <div class="controls-group">
        <label>–†–µ–∂–∏–º</label>
        <select id="stateSelector">
          <option value="INIT">#1 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</option>
          <option value="ANALYSIS">#2 –ê–Ω–∞–ª–∏–∑</option>
          <option value="STABILIZE">#3 –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è</option>
          <option value="ACTIVE">#4 –ê–∫—Ç–∏–≤–Ω—ã–π</option>
        </select>
      </div>

      <div class="controls-group">
        <label>–≠–∫—Å–ø–æ—Ä—Ç</label>
        <div class="export-options">
          <button id="exportPngBtn">üì∑ –°–Ω–∏–º–æ–∫ 4K</button>
          <button id="savePresetBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="loadPresetBtn">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </div>
        <div class="button-row">
          <button id="renderMotionBtn" class="record-button" disabled>üé¨ –†–µ–Ω–¥–µ—Ä 4K</button>
          <button id="stopRenderBtn" disabled>‚èπ –°—Ç–æ–ø</button>
        </div>
      </div>



      <div id="gui-container"></div>
    </aside>

    <div id="main-content">
      <main id="view-container">
        <!-- Progress Bar Overlay (v3.1) -->
        <div id="render-overlay" style="display: none;">
          <div class="overlay-content">
            <div class="render-title">High Fidelity Encoding...</div>
            <div class="render-stats">Frame: <span id="currentFrame">0</span> / <span id="totalFrames">0</span></div>
            <div class="progress-track">
              <div id="progress-fill"></div>
            </div>
            <div class="render-eta">Estimated Time: <span id="eta">Calculating...</span></div>
          </div>
        </div>

        <div id="canvas-mask">
          <div id="app"></div>
        </div>
      </main>

      <!-- Professional Timeline (v3.1) -->
      <footer id="timeline-panel">
        <div id="timecode-display">00:00:00:00</div>
        <div id="transport-controls">
          <button id="btn-prev-frame" title="Previous Frame">‚èÆ</button>
          <button id="btn-step-back" title="Step Back">‚óÄ</button>
          <button id="btn-stop" title="Stop">‚èπ</button>
          <button id="btn-play" title="Play">‚ñ∂</button>
          <button id="btn-step-fwd" title="Step Forward">‚ñ∂</button>
          <button id="btn-next-frame" title="Next Frame">‚è≠</button>
          <button id="btn-record" class="record-btn" title="Record">‚óè</button>
        </div>
        <div id="timeline-container">
          <!-- TimelineController will inject canvas and playhead here -->
        </div>
      </footer>
    </div>
  </div>


  <input type="file" id="audioInput" accept="audio/*" style="display: none" />
  <input type="file" id="presetInput" accept=".json" style="display: none" />
  <input type="file" id="motionInput" accept=".json" style="display: none" />
  <input type="file" id="imageInput" accept="image/*" style="display: none" />

  <script type="module" src="/src/main.ts"></script>
</body>

</html>